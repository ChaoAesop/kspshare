打包maven项目指令  清理、打包、跳过测试
-am --also-make 同时构建所列模块的依赖模块；
-pl --projects <arg> 构建制定的模块，模块间用逗号分隔；

1.打包web页面模块成jar
mvn clean package -pl web -am -Dmaven.test.skip=true


2.打包镜像命令，创建成Dockerfile文件
FROM java:8-alpine
ENV JAR_NAME ksp-web-prod
COPY $JAR_NAME.jar /usr/local/app/
WORKDIR /usr/local/app/
CMD java -jar web/target/$JAR_NAME.jar --spring.profiles.active=prod

3.加入镜像
docker build -t aesopcmc/ksp-prod:1.0 .

4.启动容器
docker stop ksp-prod && docker rm ksp-prod && docker run -d -p 8082:8080 --name ksp-prod aesopcmc/ksp-prod:1.0



【jenkins shell】
echo "FROM java:8-alpine
ENV JAR_NAME ksp-web-prod
COPY $JAR_NAME.jar /usr/local/app/
WORKDIR /usr/local/app/
CMD java -jar web/target/$JAR_NAME.jar --spring.profiles.active=prod" > Dockerfile

docker build -t aesopcmc/ksp-prod:1.1111 .